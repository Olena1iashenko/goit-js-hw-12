{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\nimport axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com';\nexport const limitPerPage = 15;\n\nexport const getPhotosByQuery = async (query, page) => {\n  const API_KEY = '43337272-ad726c9b9e29498af38112cb0';\n  const searchParams = {\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    key: API_KEY,\n    page,\n    per_page: limitPerPage,\n  };\n  return await axios.get('/api/', {params: searchParams });\n}\n  \n","export function createGalleryCards (images) {\n  return images\n    .map(\n      img => `\n      <div class=\"card-wrapper\">\n  <li class=\"gallery-card\">\n    <a href=\"${img.largeImageURL}\"><img src=\"${img.webformatURL}\" alt=\"${img.tags}\" class=\"gallery-img\"/></a>\n    <div class=\"gallery-panel\">\n      <p>Likes ${img.likes}</p>\n      <p>Views ${img.views}</p>\n      <p>Comments ${img.comments}</p>\n      <p>Downloads ${img.downloads}</p>\n    </div>\n  </li>\n</div>\n    `\n    )\n    .join('');\n};\n\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { getPhotosByQuery, limitPerPage} from \"./js/pixabay-api.js\";\nimport { createGalleryCards } from \"./js/render-functions.js\";\n\nconst searchFormEl = document.querySelector('.js-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loaderEl = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst lightbox = new SimpleLightbox('.gallery a', { captionsresponse: \"alt\", captionDelay: 250 });\nlet page = 1;\nlet searchQuery = null;\n\nasync function onSearchFormSubmit (event) {\n  event.preventDefault();\n  searchQuery = event.target.elements.search.value.trim();\n  galleryEl.innerHTML = \"\";\n  page = 1;\n  loadMoreBtn.classList.add(\"is-hidden\");\n  loaderEl.classList.remove(\"is-hidden\");\n  searchFormEl.reset();\n  \n  if (searchQuery === '') {\n    loaderEl.classList.add('is-hidden');\n    return iziToast.error({\n      message: 'The input field must not be empty!',\n      position: 'topRight',\n    });\n  }\n  try {\n  const { data: { totalHits, hits } } = await getPhotosByQuery(searchQuery, page);\n\n    if (hits.length === 0) {\n    loaderEl.classList.add('is-hidden');\n    return iziToast.error({\n      message: 'Sorry, there are no images matching your search query. Please try again!',\n      position: 'topRight',\n    });\n  } \n    \n    if (totalHits < limitPerPage) {\n    loaderEl.classList.add('is-hidden');\n    galleryEl.innerHTML = createGalleryCards(hits);\n    return iziToast.info({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n    });\n  }\n  loadMoreBtn.classList.remove(\"is-hidden\");\n  galleryEl.innerHTML = createGalleryCards(hits);\n  lightbox.refresh();\n  loaderEl.classList.add('is-hidden');\n \n} catch (error) {\n  console.log(error);\n}\n}\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\n\nasync function onClickBtn (event) {\n  try {\n    page++;\n    const { data: {totalHits, hits} } = await getPhotosByQuery(searchQuery, page);\n    galleryEl.insertAdjacentHTML('beforeend', createGalleryCards(hits));\n    lightbox.refresh();\n       // Функція для скролу\n    const { height: cardHeight } = document\n      .querySelector('.gallery')\n      .firstElementChild.getBoundingClientRect();\n\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n\n    const lastPage = Math.ceil(totalHits / limitPerPage);\n    \n    if (lastPage === page) {\n    loadMoreBtn.classList.add(\"is-hidden\");\n    loadMoreBtn.removeEventListener(\"click\", onClickBtn);\n    return iziToast.info({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n    });\n      \n  }\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nloadMoreBtn.addEventListener(\"click\", onClickBtn);"],"names":["axios","limitPerPage","getPhotosByQuery","query","page","searchParams","createGalleryCards","images","img","searchFormEl","galleryEl","loaderEl","loadMoreBtn","lightbox","SimpleLightbox","searchQuery","onSearchFormSubmit","event","iziToast","totalHits","hits","error","onClickBtn","cardHeight"],"mappings":"owBAGAA,EAAM,SAAS,QAAU,sBAClB,MAAMC,EAAe,GAEfC,EAAmB,MAAOC,EAAOC,IAAS,CAErD,MAAMC,EAAe,CACnB,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,IANc,qCAOd,KAAAC,EACA,SAAUH,CACd,EACE,OAAO,MAAMD,EAAM,IAAI,QAAS,CAAC,OAAQK,CAAY,CAAE,CACzD,EClBO,SAASC,EAAoBC,EAAQ,CAC1C,OAAOA,EACJ,IACCC,GAAO;AAAA;AAAA;AAAA,eAGEA,EAAI,aAAa,eAAeA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA,iBAEhEA,EAAI,KAAK;AAAA,iBACTA,EAAI,KAAK;AAAA,oBACNA,EAAI,QAAQ;AAAA,qBACXA,EAAI,SAAS;AAAA;AAAA;AAAA;AAAA,KAK7B,EACA,KAAK,EAAE,CACZ,CCVA,MAAMC,EAAe,SAAS,cAAc,UAAU,EAChDC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAW,SAAS,cAAc,SAAS,EAC3CC,EAAc,SAAS,cAAc,YAAY,EACjDC,EAAW,IAAIC,EAAe,aAAc,CAAE,iBAAkB,MAAO,aAAc,GAAG,CAAE,EAChG,IAAIV,EAAO,EACPW,EAAc,KAElB,eAAeC,EAAoBC,EAAO,CASxC,GARAA,EAAM,eAAc,EACpBF,EAAcE,EAAM,OAAO,SAAS,OAAO,MAAM,OACjDP,EAAU,UAAY,GACtBN,EAAO,EACPQ,EAAY,UAAU,IAAI,WAAW,EACrCD,EAAS,UAAU,OAAO,WAAW,EACrCF,EAAa,MAAK,EAEdM,IAAgB,GAClB,OAAAJ,EAAS,UAAU,IAAI,WAAW,EAC3BO,EAAS,MAAM,CACpB,QAAS,qCACT,SAAU,UAChB,CAAK,EAEH,GAAI,CACJ,KAAM,CAAE,KAAM,CAAE,UAAAC,EAAW,KAAAC,CAAI,CAAI,EAAG,MAAMlB,EAAiBa,EAAaX,CAAI,EAE5E,GAAIgB,EAAK,SAAW,EACpB,OAAAT,EAAS,UAAU,IAAI,WAAW,EAC3BO,EAAS,MAAM,CACpB,QAAS,2EACT,SAAU,UAChB,CAAK,EAGD,GAAIC,EAAYlB,EAChB,OAAAU,EAAS,UAAU,IAAI,WAAW,EAClCD,EAAU,UAAYJ,EAAmBc,CAAI,EACtCF,EAAS,KAAK,CACnB,QAAS,6DACT,SAAU,UAChB,CAAK,EAEHN,EAAY,UAAU,OAAO,WAAW,EACxCF,EAAU,UAAYJ,EAAmBc,CAAI,EAC7CP,EAAS,QAAO,EAChBF,EAAS,UAAU,IAAI,WAAW,CAEpC,OAASU,EAAO,CACd,QAAQ,IAAIA,CAAK,CACnB,CACA,CAEAZ,EAAa,iBAAiB,SAAUO,CAAkB,EAE1D,eAAeM,EAAYL,EAAO,CAChC,GAAI,CACFb,IACA,KAAM,CAAE,KAAM,CAAC,UAAAe,EAAW,KAAAC,CAAI,CAAG,EAAG,MAAMlB,EAAiBa,EAAaX,CAAI,EAC5EM,EAAU,mBAAmB,YAAaJ,EAAmBc,CAAI,CAAC,EAClEP,EAAS,QAAO,EAEhB,KAAM,CAAE,OAAQU,CAAU,EAAK,SAC5B,cAAc,UAAU,EACxB,kBAAkB,sBAAqB,EAS1C,GAPA,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QAChB,CAAK,EAEgB,KAAK,KAAKJ,EAAYlB,CAAY,IAElCG,EACjB,OAAAQ,EAAY,UAAU,IAAI,WAAW,EACrCA,EAAY,oBAAoB,QAASU,CAAU,EAC5CJ,EAAS,KAAK,CACnB,QAAS,6DACT,SAAU,UAChB,CAAK,CAGF,OAAQG,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH,CAEAT,EAAY,iBAAiB,QAASU,CAAU"}
{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\nimport axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com';\nconst limitPerPage = 15;\n\nexport const getPhotosByQuery = async (query, page) => {\n  const API_KEY = '43337272-ad726c9b9e29498af38112cb0';\n  const searchParams = {\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    key: API_KEY,\n    page,\n    per_page: limitPerPage,\n  };\n  return await axios.get('/api/', {params: searchParams });\n}\n  \n","export function createGalleryCards (images) {\n  return images\n    .map(\n      img => `\n      <div class=\"card-wrapper\">\n  <li class=\"gallery-card\">\n    <a href=\"${img.largeImageURL}\"><img src=\"${img.webformatURL}\" alt=\"${img.tags}\" class=\"gallery-img\"/></a>\n    <div class=\"gallery-panel\">\n      <p>Likes ${img.likes}</p>\n      <p>Views ${img.views}</p>\n      <p>Comments ${img.comments}</p>\n      <p>Downloads ${img.downloads}</p>\n    </div>\n  </li>\n</div>\n    `\n    )\n    .join('');\n};\n\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { getPhotosByQuery} from \"./js/pixabay-api.js\";\nimport { createGalleryCards } from \"./js/render-functions.js\";\n\nconst searchFormEl = document.querySelector('.js-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loaderEl = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst lightbox = new SimpleLightbox('.gallery a', { captionsresponse: \"alt\", captionDelay: 250 });\nlet page = 1;\n\nasync function onSearchFormSubmit (event) {\n  event.preventDefault();\n  const searchQuery = event.target.elements.search.value.trim();\n  galleryEl.innerHTML = \"\";\n  loadMoreBtn.classList.remove('is-hiden');\n  \n  if (searchQuery === '') {\n    return iziToast.error({\n      message: 'The input field must not be empty!',\n      position: 'topRight',\n    });\n  }\ntry {\n  const response = await getPhotosByQuery(searchQuery, page);\n    if (response.length === 0) {\n      return iziToast.error({\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n    } \n  galleryEl.innerHTML = createGalleryCards(response.data.hits);\n    loaderEl.classList.remove('is-hidden');\n    lightbox.refresh();\n \n} catch (error) {\n  console.log(error);\n}\n  finally {\n    loaderEl.classList.add('is-hidden');\n    loadMoreBtn.classList.add('is-hiden');\n    searchFormEl.reset();\n  }\n}\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\n\n// const totalHits = response.data.hits.totalHits;\n// const lastPage = Math.ceil(totalHits / limitPerPage);\n\nconst onClickBtn = async (event) => {\n  try {\n    page++;\n    const { data } = await getPhotosByQuery(searchQuery, page);\n     \n    galleryEl.insertAdjacentElement('beforeend', createGalleryCards(data));\n       // Функція для скролу\n    const { height: cardHeight } = document\n      .querySelector('.gallery')\n      .firstElementChild.getBoundingClientRect();\n\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  if (lastPage === page) {\n    loadMoreBtn.classList.add(\"is-hidden\");\n    loadMoreBtn.removeEventListener(\"click\", onClickBtn);\n    return iziToast.info({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n    });\n  }\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nloadMoreBtn.addEventListener(\"click\", onClickBtn);"],"names":["axios","limitPerPage","getPhotosByQuery","query","page","searchParams","createGalleryCards","images","img","searchFormEl","galleryEl","loaderEl","loadMoreBtn","lightbox","SimpleLightbox","onSearchFormSubmit","event","searchQuery","iziToast","response","error","onClickBtn","data","cardHeight"],"mappings":"owBAGAA,EAAM,SAAS,QAAU,sBACzB,MAAMC,EAAe,GAERC,EAAmB,MAAOC,EAAOC,IAAS,CAErD,MAAMC,EAAe,CACnB,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,IANc,qCAOd,KAAAC,EACA,SAAUH,CACd,EACE,OAAO,MAAMD,EAAM,IAAI,QAAS,CAAC,OAAQK,CAAY,CAAE,CACzD,EClBO,SAASC,EAAoBC,EAAQ,CAC1C,OAAOA,EACJ,IACCC,GAAO;AAAA;AAAA;AAAA,eAGEA,EAAI,aAAa,eAAeA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA,iBAEhEA,EAAI,KAAK;AAAA,iBACTA,EAAI,KAAK;AAAA,oBACNA,EAAI,QAAQ;AAAA,qBACXA,EAAI,SAAS;AAAA;AAAA;AAAA;AAAA,KAK7B,EACA,KAAK,EAAE,CACZ,CCVA,MAAMC,EAAe,SAAS,cAAc,UAAU,EAChDC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAW,SAAS,cAAc,SAAS,EAC3CC,EAAc,SAAS,cAAc,YAAY,EACjDC,EAAW,IAAIC,EAAe,aAAc,CAAE,iBAAkB,MAAO,aAAc,GAAG,CAAE,EAChG,IAAIV,EAAO,EAEX,eAAeW,EAAoBC,EAAO,CACxCA,EAAM,eAAc,EACpB,MAAMC,EAAcD,EAAM,OAAO,SAAS,OAAO,MAAM,OAIvD,GAHAN,EAAU,UAAY,GACtBE,EAAY,UAAU,OAAO,UAAU,EAEnCK,IAAgB,GAClB,OAAOC,EAAS,MAAM,CACpB,QAAS,qCACT,SAAU,UAChB,CAAK,EAEL,GAAI,CACF,MAAMC,EAAW,MAAMjB,EAAiBe,EAAab,CAAI,EACvD,GAAIe,EAAS,SAAW,EACtB,OAAOD,EAAS,MAAM,CACpB,QAAS,2EACT,SAAU,UAClB,CAAO,EAELR,EAAU,UAAYJ,EAAmBa,EAAS,KAAK,IAAI,EACzDR,EAAS,UAAU,OAAO,WAAW,EACrCE,EAAS,QAAO,CAEpB,OAASO,EAAO,CACd,QAAQ,IAAIA,CAAK,CACnB,QACU,CACNT,EAAS,UAAU,IAAI,WAAW,EAClCC,EAAY,UAAU,IAAI,UAAU,EACpCH,EAAa,MAAK,CACnB,CACH,CAEAA,EAAa,iBAAiB,SAAUM,CAAkB,EAK1D,MAAMM,EAAa,MAAOL,GAAU,CAClC,GAAI,CACFZ,IACA,KAAM,CAAE,KAAAkB,CAAI,EAAK,MAAMpB,EAAiB,YAAaE,CAAI,EAEzDM,EAAU,sBAAsB,YAAaJ,EAAmBgB,CAAI,CAAC,EAErE,KAAM,CAAE,OAAQC,CAAU,EAAK,SAC5B,cAAc,UAAU,EACxB,kBAAkB,sBAAqB,EAM5C,GAJE,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QAChB,CAAK,EACC,WAAanB,EACf,OAAAQ,EAAY,UAAU,IAAI,WAAW,EACrCA,EAAY,oBAAoB,QAASS,CAAU,EAC5CH,EAAS,KAAK,CACnB,QAAS,6DACT,SAAU,UAChB,CAAK,CAEF,OAAQE,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH,EAEAR,EAAY,iBAAiB,QAASS,CAAU"}